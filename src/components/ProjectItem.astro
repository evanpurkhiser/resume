---
import type {Project} from '../types';
import ItemCard from './ItemCard.astro';
import {marked} from 'marked';

interface Props {
  project: Project;
}

const {project} = Astro.props;

// Configure marked to render inline markdown
marked.use({
  mangle: false,
  headerIds: false,
});
---

<ItemCard title={project.name}>
  <div slot="trailing" class="flex flex-wrap items-baseline gap-x-4 gap-y-1 sm:gap-x-6">
    {
      project.links &&
        project.links.map(link => {
          const isGitHub = link.url.includes('github.com');
          const iconClass = isGitHub ? 'github-link' : 'link-icon';
          return (
            <a
              href={link.url}
              class={`text-xs sm:text-sm text-slate-600 dark:text-stone-400 hover:underline whitespace-nowrap ${iconClass}`}
            >
              {link.name}
            </a>
          );
        })
    }
  </div>
  <p class="prose-text" set:html={marked.parseInline(project.description)} />
</ItemCard>
